#pragma bank 255

#include <stdint.h>
#include <gbdk/platform.h>
#include <gbdk/metasprites.h>
#include "TilesInfo.h"
#include "MetaSpriteInfo.h"

BANKREF(dizzy)

// CGB and SMS/GG palettes (should be different, but ok for the test
static const palette_color_t dizzy_palettes[] = {
	RGB8(  0,  0,  0), RGB8(  0,  0,  0), RGB8(101, 99, 99), RGB8(255,255,255),
#ifdef SEGA
	RGB8(  0,  0,  0), RGB8(  0,  0,  0), RGB8(  0,  0,  0), RGB8(  0,  0,  0),
	RGB8(  0,  0,  0), RGB8(  0,  0,  0), RGB8(  0,  0,  0), RGB8(  0,  0,  0),
	RGB8(  0,  0,  0), RGB8(  0,  0,  0), RGB8(  0,  0,  0), RGB8(  0,  0,  0)
#endif	
};

// empty tiles just to initialize VRAM with something
static const uint8_t dizzy_tiles[] = {
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
#ifdef SEGA
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
#endif
};

// metasprite of 3x3 8x8 px hardware sprites
const metasprite_t dizzy_metasprite[] = {
    METASPR_ITEM(  0,  0,  0, S_PALETTE), METASPR_ITEM(  0,  8,  1, S_PALETTE), METASPR_ITEM(  0,  8,  2, S_PALETTE),
    METASPR_ITEM(  8,-16,  3, S_PALETTE), METASPR_ITEM(  0,  8,  4, S_PALETTE), METASPR_ITEM(  0,  8,  5, S_PALETTE),
    METASPR_ITEM(  8,-16,  6, S_PALETTE), METASPR_ITEM(  0,  8,  7, S_PALETTE), METASPR_ITEM(  0,  8,  8, S_PALETTE),
    METASPR_TERM
};

// only one animation, because we stream tile data instead
const metasprite_t* const dizzy_metasprites[1] = {
	dizzy_metasprite
};

// dizzy sprite descriptor structure
const struct MetaSpriteInfo dizzy = {
	.width        = 24,                // width
	.height       = 24,                // height
	.num_tiles    = 9,                 // num tiles
	.data         = dizzy_tiles,       // tiles
	.num_palettes = 1,                 // num palettes
	.palettes     = dizzy_palettes,    // CGB palette
	.num_sprites  = 1,                 // num sprites
	.metasprites  = dizzy_metasprites, // metasprites
};
